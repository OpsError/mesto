(()=>{"use strict";class e{constructor({items:e,renderer:t},s){this._items=e,this._renderer=t,this._selector=document.querySelector(s)}addItem(e){this._selector.prepend(e)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}}class t{constructor(e){this._popupSelector=e,this._handleEscClose=this._handleEscClose.bind(this)}close(){this._popupSelector.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}open(){this._popupSelector.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popupSelector.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup")||e.target.classList.contains("popup__close-icon"))&&this.close()}))}}class s extends t{constructor(e,t){super(e),this._handleSubmitForm=t,this._form=e.querySelector(".popup__form"),this._inputList=e.querySelectorAll(".popup__input")}_getInputValues(){return this._inputValueList={},this._inputList.forEach((e=>{this._inputValueList[e.name]=e.value})),this._inputValueList}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._list=this._getInputValues(),this._handleSubmitForm({name:this._list.title,link:this._list.about})})),super.setEventListeners()}close(){super.close(),this._form.reset()}}class n{constructor(e,t){this._formElement=t,this._config=e,this._inputList=Array.from(t.querySelectorAll(this._config.inputSelector)),this._buttonElement=t.querySelector(this._config.submitButtonSelector)}_showInputError=(e,t)=>{const s=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._config.inputErrorClass),s.textContent=t,s.classList.add(this._config.errorClass)};_hideInputError=e=>{const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClass),t.textContent=""};_checkInputValidity=e=>{e.validity.valid?this._hideInputError(e):(console.log(e.validationMessage),this._showInputError(e,e.validationMessage))};_hasInvalidInput=()=>this._inputList.some((e=>!e.validity.valid));_toggleButtonState=()=>{this._hasInvalidInput()?(this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1)};_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}blockButtonSave(e){this._buttonElement.classList.add("popup__save_inactive"),this._buttonElement.disabled=!0}enableValidation(){this._setEventListeners()}}class o{constructor(e,t,{openImage:s}){this._data=e,this._templateSelector=t,this._openImage=s,this._element=this._getTemplate(),this._elementPhoto=this._element.querySelector(".element__photo")}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}_setEventListeners(){const e=this._element.querySelector(".element__like"),t=this._element.querySelector(".element__trash"),s=this._element.querySelector(".element__like-icon");e.addEventListener("click",(()=>{s.classList.toggle("element__like-icon_active")})),t.addEventListener("click",(()=>{this._element.remove(),this._element=null})),this._elementPhoto.addEventListener("click",(()=>{this._openImage({link:this._data.link,name:this._data.name})}))}generateCard(){return this._elementPhoto.src=this._data.link,this._elementPhoto.alt=this._data.name,this._element.querySelector(".element__description").textContent=this._data.name,this._setEventListeners(),this._element}}const i=document.querySelector(".page"),r=i.querySelector(".form-edit"),l=i.querySelector(".form-add"),a=document.querySelector(".popup_image-full"),_=i.querySelector(".profile__edit-button"),c=i.querySelector(".profile__add-button"),p=i.querySelector(".profile__name"),u=i.querySelector(".profile__description"),h=i.querySelector(".profile__photo"),d=r.querySelector(".popup"),m=r.querySelector(".popup__input_type_name"),S=r.querySelector(".popup__input_type_description"),f=l.querySelector(".popup"),v=l.querySelector(".popup__input_type_title"),y=l.querySelector(".popup__input_type_link"),g=(a.querySelector(".popup"),{fieldsetSelector:".popup__form-set",inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"}),E=new class extends t{constructor(e){super(e),this._image=this._popupSelector.querySelector(".popup__image"),this._figcaption=this._popupSelector.querySelector(".popup__figcaption")}open(e,t){this._image.src=t,this._image.alt=e,this._figcaption.textContent=e,super.open()}}(a);function L({link:e,name:t}){E.open(t,e)}function b(e){return new o(e,"#element",{openImage:L}).generateCard()}E.setEventListeners();const q=new n(g,l.querySelector(".popup__form")),C=new n(g,r.querySelector(".popup__form"));q.enableValidation(),C.enableValidation();const I=new class{constructor(e){this._url=e.baseUrl,this._headers=e.headers}_handleResponse(e){return e.ok?e.json():Promise.reject(new Error("Произошла ошибка"))}getInfo(){return fetch(`${this._url}/users/me`,{headers:this._headers}).then(this._handleResponse)}getCard(){return fetch(`${this._url}/cards`,{headers:this._headers}).then(this._handleResponse)}patchInfo(e){return fetch(`${this._url}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.link})}).then(this._handleResponse)}postCard(e){return fetch(`${this._url}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._handleResponse)}}({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{authorization:"11c262d9-4172-458c-924e-d3009da526d4","Content-type":"application/json"}});I.getInfo().then((e=>{p.textContent=e.name,u.textContent=e.about,h.src=e.avatar,console.log(e)}));const k=new s(f,(({name:t,link:s})=>{I.postCard({name:t,link:s}).then((t=>{const s=b(t);console.log(s);const n=new e({items:t,renderer:e=>{const t=b(e);n.addItem(t)}},".elements");n.addItem(s),k.close()}))}));k.setEventListeners();const w=new class{constructor({title:e,about:t}){this._title=e,this._about=t,this._profileName=document.querySelector(".profile__name"),this._profileDescription=document.querySelector(".profile__description")}getUserInfo(){return{name:this._title.textContent,about:this._about.textContent}}setUserInfo(e,t){this._profileName.textContent=e,this._profileDescription.textContent=t}}({title:p,about:u}),x=new s(d,(({name:e,link:t})=>{I.patchInfo({name:e,link:t}).then((e=>{console.log(e),w.setUserInfo(e.name,e.about),x.close()}))}));x.setEventListeners(),I.getCard().then((t=>{const s=new e({items:t,renderer:e=>{const t=b(e);s.addItem(t)}},".elements");s.renderItems()})),c.addEventListener("click",(()=>{k.open(),v.value="",y.value="",q.blockButtonSave(f)})),_.addEventListener("click",(()=>{const e=w.getUserInfo();m.value=e.name,S.value=e.about,x.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRLEdBQ3JCeUUsRUFBWXpFLE1BQVEsR0FDcEJnRixFQUFrQjFDLGdCQUFnQmlDLEVBQVMsSUFJL0NSLEVBQVc3RSxpQkFBaUIsU0FBUyxLQUNqQyxNQUFNbUksRUFBZVIsRUFBU0ssY0FDOUI3QyxFQUFjckUsTUFBUXFILEVBQWF0SCxLQUNuQ3VFLEVBQWF0RSxNQUFRcUgsRUFBYWhILE1BQ2xDK0csRUFBaUJwSSxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBzZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9zZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEl0ZW0gKGVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9zZWxlY3Rvci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXApIHtcclxuICAgICAgICB0aGlzLl9wb3B1cFNlbGVjdG9yID0gcG9wdXA7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAnKSB8fCAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1pY29uJykpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwLCBoYW5kbGVTdWJtaXRGb3JtKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXApO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0gPSBoYW5kbGVTdWJtaXRGb3JtO1xyXG5cclxuICAgICAgICB0aGlzLl9mb3JtID0gcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8v0YHQvtCx0LjRgNCw0LXRgiDQtNCw0L3QvdGL0LUg0YEg0L/QvtC70LXQuVxyXG4gICAgX2dldElucHV0VmFsdWVzICgpIHtcclxuICAgICAgICB0aGlzLl9pbnB1dFZhbHVlTGlzdCA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lucHV0VmFsdWVMaXN0W2l0ZW0ubmFtZV0gPSBpdGVtLnZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRWYWx1ZUxpc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9saXN0ID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLl9saXN0LnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgLy/QsiBsaW5rINC/0YDQvtCx0LvQtdC80LAuINC90LDQtNC+INGA0LXRiNC40YLRjFxyXG4gICAgICAgICAgICAgICAgbGluazogdGhpcy5fbGlzdC5hYm91dH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yIChjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy/RgdC60YDRi9GC0Ywg0L7RiNC40LHQutGDINCy0LLQvtC00LBcclxuICAgIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvL9C/0YDQvtCy0LXRgNC60LAg0YTQvtGA0LzRiyDQvdCwINCy0LDQu9C40LTQvdC+0YHRgtGMXHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7IC8v0LXRgdC70Lgg0LXRgdGC0Ywg0L7RiNC40LHQutCwXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy/Qv9GA0L7QstC10YDQutCwINC60LDQttC00L7Qs9C+INC/0L7Qu9GPINC90LAg0L7RiNC40LHQutGDINCyINC/0L7Qu9C1INCy0LLQvtC00LBcclxuICAgIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvL9GB0LTQtdC70LDRgtGMINC60L3QvtC/0LrRgyDQvdC10LDQutGC0LjQstC90L7QuSjQsNC60YLQuNCy0L3QvtC5KSDQv9GA0Lgg0L7RiNC40LHQutC1KNC/0YDQsNCy0LjQu9GM0L3QvtC8INCy0LLQvtC00LUpXHJcbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvL9GD0YHRgtCw0L3QvtCy0LjRgtGMINGB0LvRg9GI0LDRgtC10LvQuCDQvdCwINC60LDQttC00YPRjiDRhNC+0YDQvNGDXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMgKCkge1xyXG4gICAgICAgIC8v0L/RgNC+0LLQtdGA0LjRgtGMINC60L3QvtC/0LrRgyDQv9GA0Lgg0L7RgtC60YDRi9GC0LjQuCDRhNC+0YDQvNGLXHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgXHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCk9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAvL9C/0YDQvtCy0LXRgNGP0YLRjCDQutC90L7Qv9C60YMg0L/RgNC4INCy0LLQvtC00LUg0LrQsNC20LTQvtCz0L4g0YHQuNC80LLQvtC70LBcclxuICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgLy/Qt9Cw0LHQu9C+0LrQuNGA0L7QstCw0YLRjCDQutC90L7Qv9C60YMg0L/RgNC4INC+0YLQutGA0YvRgtC40Lgg0L/QvtC/0LDQv9CwXHJcbiAgICBibG9ja0J1dHRvblNhdmUocG9wdXApIHtcclxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcHVwX19zYXZlX2luYWN0aXZlJyk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICAgIFxyXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEsIHRlbXBsYXRlU2VsZWN0b3IsIHtvcGVuSW1hZ2V9KSB7XHJcbiAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fb3BlbkltYWdlID0gb3BlbkltYWdlO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRQaG90byA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3Bob3RvJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy/QstC+0LfQstGA0LDRidCw0LXRgiDRgdC10LvQtdC60YLQvtGAINGI0LDQsdC70L7QvdCwXHJcbiAgICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxyXG4gICAgICAgLmNvbnRlbnRcclxuICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpXHJcbiAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICAvL9GD0YHRgtCw0L3QvtCy0YnQuNC6INGB0L7QsdGL0YLQuNC5XHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UnKTtcclxuICAgICAgICBjb25zdCBidXR0b25UcmFzaCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RyYXNoJyk7XHJcbiAgICAgICAgY29uc3QgaWNvbkJ1dHRvbkxpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWljb24nKTtcclxuXHJcbiAgICAgICAgLy/Qu9Cw0LnQulxyXG4gICAgICAgIGJ1dHRvbkxpa2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGljb25CdXR0b25MaWtlLmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX2xpa2UtaWNvbl9hY3RpdmUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/Rg9C00LDQu9C40YLRjFxyXG4gICAgICAgIGJ1dHRvblRyYXNoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/QvtGC0LrRgNGL0YLRjCDRhNC+0YLQvtCz0YDQsNGE0LjRjlxyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRQaG90by5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fb3BlbkltYWdlKHtsaW5rOiB0aGlzLl9kYXRhLmxpbmssIG5hbWU6IHRoaXMuX2RhdGEubmFtZX0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIC8v0YPRgdGC0LDQvdCw0LLQu9C40LLQsNC10YIg0LrQsNGA0YLQvtGH0LrQtSDQvdCw0LfQstCw0L3QuNC1LCDQutCw0YDRgtC40L3QutGDINC4INC+0L/QuNGB0LDQvdC40LVcclxuICAgIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50UGhvdG8uc3JjID0gdGhpcy5fZGF0YS5saW5rO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRQaG90by5hbHQgPSB0aGlzLl9kYXRhLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fZGVzY3JpcHRpb24nKS50ZXh0Q29udGVudCA9IHRoaXMuX2RhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICAgIH1cclxufSIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcblxyXG4vLyBleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4vLyAgICAge1xyXG4vLyAgICAgICBuYW1lOiAn0JzQsNC90LTQttC40YDQviDQodCw0L3QvicsXHJcbi8vICAgICAgIGRlc2NyaXB0aW9uOiAnaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC9hMi9kYi83My9hMmRiNzM4OTZlN2Q5Nzg1YmMzZWUzNzgxYzU0NGZhZS5qcGcnXHJcbi8vICAgICB9LFxyXG4vLyAgICAge1xyXG4vLyAgICAgICBuYW1lOiAn0KHQsNGC0L7RgNGDINCT0L7QtNC30ZEnLFxyXG4vLyAgICAgICBkZXNjcmlwdGlvbjogJ2h0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvYmQvOWUvMGMvYmQ5ZTBjNzhhNWFmMDU1N2Y2YmZkNTY5OGQwNzQ3YTIuanBnJ1xyXG4vLyAgICAgfSxcclxuLy8gICAgIHtcclxuLy8gICAgICAgbmFtZTogJ9Ck0YPRiNC4JyxcclxuLy8gICAgICAgZGVzY3JpcHRpb246ICdodHRwczovL2kucGluaW1nLmNvbS81NjR4L2E4LzYyL2E1L2E4NjJhNTVmMTExZDU4MGEyZGE2NTE1NGQ5NzYwMzk3LmpwZydcclxuLy8gICAgIH0sXHJcbi8vICAgICB7XHJcbi8vICAgICAgIG5hbWU6ICfQrdGA0LXQvSDQmdC10LPQtdGAJyxcclxuLy8gICAgICAgZGVzY3JpcHRpb246ICdodHRwczovL2kucGluaW1nLmNvbS81NjR4L2Y3LzY4LzZkL2Y3Njg2ZGZhMDRhZDQ4YWY5NTQ5N2M5MzAzYjI2NDcxLmpwZydcclxuLy8gICAgIH0sXHJcbi8vICAgICB7XHJcbi8vICAgICAgIG5hbWU6ICfQrtC00LfQuCDQmNGC0LDQtNC+0YDQuCcsXHJcbi8vICAgICAgIGRlc2NyaXB0aW9uOiAnaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC8wOS9hZC83My8wOWFkNzNjYzRlZTNiYjE5MDVmOTM3NGZmNzlmNTgyMy5qcGcnXHJcbi8vICAgICB9LFxyXG4vLyAgICAge1xyXG4vLyAgICAgICBuYW1lOiAn0JrRkdC00LfQuNGA0L4g0KDQtdC90LPQvtC60YMnLFxyXG4vLyAgICAgICBkZXNjcmlwdGlvbjogJ2h0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvMTEvNzUvZDEvMTE3NWQxYmI3MDExNDMwNmI3YjMxYWJlYWUxMWI2OWMuanBnJ1xyXG4vLyAgICAgfVxyXG4vLyAgIF07XHJcbiAgXHJcbmNvbnN0IHBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZScpO1xyXG4gIFxyXG5leHBvcnQgY29uc3QgZm9ybUVkaXRQcm9maWxlID0gcGFnZS5xdWVyeVNlbGVjdG9yKCcuZm9ybS1lZGl0Jyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtQWRkQ2FyZCA9IHBhZ2UucXVlcnlTZWxlY3RvcignLmZvcm0tYWRkJyk7XHJcbmV4cG9ydCBjb25zdCBpbWFnZUZ1bGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfaW1hZ2UtZnVsbCcpO1xyXG4gIFxyXG5leHBvcnQgY29uc3QgYnV0dG9uRWRpdCA9IHBhZ2UucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBidXR0b25BZGQgPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IHBhZ2UucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25hbWUnKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IHBhZ2UucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlUGhvdG8gPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19waG90bycpO1xyXG4gIFxyXG5leHBvcnQgY29uc3QgcG9wdXBFZGl0ID0gZm9ybUVkaXRQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cCcpO1xyXG5leHBvcnQgY29uc3QgbmFtZUlucHV0RWRpdCA9IGZvcm1FZGl0UHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfbmFtZScpO1xyXG5leHBvcnQgY29uc3Qgam9iSW5wdXRFZGl0ID0gZm9ybUVkaXRQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9kZXNjcmlwdGlvbicpO1xyXG4gIFxyXG5leHBvcnQgY29uc3QgcG9wdXBBZGQgPSBmb3JtQWRkQ2FyZC5xdWVyeVNlbGVjdG9yKCcucG9wdXAnKTtcclxuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dEFkZCA9IGZvcm1BZGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV90aXRsZScpO1xyXG5leHBvcnQgY29uc3Qgc3JjSW5wdXRBZGQgPSBmb3JtQWRkQ2FyZC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfbGluaycpO1xyXG4gIFxyXG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZSA9IGltYWdlRnVsbC5xdWVyeVNlbGVjdG9yKCcucG9wdXAnKTtcclxuICBcclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgZmllbGRzZXRTZWxlY3RvcjogJy5wb3B1cF9fZm9ybS1zZXQnLFxyXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc2F2ZScsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19zYXZlX2luYWN0aXZlJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlT2JqZWN0ID0gbmV3IFBvcHVwV2l0aEltYWdlKGltYWdlRnVsbCk7XHJcbnBvcHVwSW1hZ2VPYmplY3Quc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8v0L7RgtC60YDRi9GC0Ywg0LrQsNGA0YLQuNC90LrRg1xyXG5leHBvcnQgZnVuY3Rpb24gb3BlbkltYWdlICh7bGluaywgbmFtZX0pIHtcclxuICBwb3B1cEltYWdlT2JqZWN0Lm9wZW4obmFtZSwgbGluayk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYXJkKGVsZW1lbnQpIHtcclxuICBjb25zdCBlbGVtZW50Q2FyZCA9IG5ldyBDYXJkKGVsZW1lbnQsICcjZWxlbWVudCcsIHtvcGVuSW1hZ2V9KTtcclxuICBjb25zdCBjYXJkVGVtcGxhdGUgPSBlbGVtZW50Q2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuXHJcbiAgcmV0dXJuIGNhcmRUZW1wbGF0ZTtcclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXApIHtcclxuICAgICAgICBzdXBlcihwb3B1cCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcbiAgICAgICAgdGhpcy5fZmlnY2FwdGlvbiA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnBvcHVwX19maWdjYXB0aW9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICAgICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcclxuICAgICAgICB0aGlzLl9pbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX2ZpZ2NhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIH1cclxufSIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5cclxuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcclxuXHJcbmltcG9ydCB7IHZhbGlkYXRpb25Db25maWcsIGZvcm1BZGRDYXJkLCBmb3JtRWRpdFByb2ZpbGUsIHBvcHVwQWRkLCBwb3B1cEVkaXQsIGJ1dHRvbkFkZCwgYnV0dG9uRWRpdCwgbmFtZUlucHV0QWRkLCBuYW1lSW5wdXRFZGl0LCBzcmNJbnB1dEFkZCwgam9iSW5wdXRFZGl0LFxyXG5wcm9maWxlTmFtZSwgcHJvZmlsZURlc2NyaXB0aW9uLCBwcm9maWxlUGhvdG99IGZyb20gJy4uL3V0aWxzL3V0aWxzLmpzJztcclxuaW1wb3J0IHsgb3BlbkltYWdlLCBjcmVhdGVDYXJkIH0gZnJvbSAnLi4vdXRpbHMvdXRpbHMuanMnO1xyXG5cclxuLy8g0JLQsNC70LjQtNCw0YbQuNGPXHJcbmNvbnN0IGZvcm1BZGRWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUFkZENhcmQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJykpO1xyXG5jb25zdCBmb3JtRWRpdFZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtRWRpdFByb2ZpbGUucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJykpO1xyXG5mb3JtQWRkVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmZvcm1FZGl0VmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICAgIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTYwJyxcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiAnMTFjMjYyZDktNDE3Mi00NThjLTkyNGUtZDMwMDlkYTUyNmQ0JyxcclxuICAgICAgICAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLy/Qv9GA0Lgg0LfQsNCz0YDRg9C30LrQtSDRgdGC0YDQsNC90LjRhtGLINC40LzRjyDQuCDQvtC/0LjRgdCw0L3QuNC1INGBINGB0LXRgNCy0LXRgNCwXHJcbmFwaS5nZXRJbmZvKClcclxuICAgIC50aGVuICgocmVzKSA9PiB7XHJcbiAgICAgICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSByZXMubmFtZTtcclxuICAgICAgICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSByZXMuYWJvdXQ7XHJcbiAgICAgICAgcHJvZmlsZVBob3RvLnNyYyA9IHJlcy5hdmF0YXI7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgIH0pO1xyXG5cclxuLy/Qv9C+0YLQvtC8XHJcbmNvbnN0IHBvcHVwQWRkQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwQWRkLCAoe25hbWUsIGxpbmt9KSA9PiB7XHJcbiAgICBhcGkucG9zdENhcmQoe25hbWUsIGxpbmt9KVxyXG4gICAgICAgIC50aGVuICgocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGNyZWF0ZUNhcmQocmVzKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coY2FyZFRlbXBsYXRlKTtcclxuICAgICAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBTZWN0aW9uKHtcclxuICAgICAgICAgICAgICAgIGl0ZW1zOiByZXMsXHJcbiAgICAgICAgICAgICAgICByZW5kZXJlcjogIChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FyZFRlbXBsYXRlID0gY3JlYXRlQ2FyZChlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBjYXJkLmFkZEl0ZW0oY2FyZFRlbXBsYXRlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgJy5lbGVtZW50cycpO1xyXG4gICAgICAgICAgICBjYXJkLmFkZEl0ZW0oY2FyZFRlbXBsYXRlKTtcclxuXHJcbiAgICAgICAgICAgIHBvcHVwQWRkQ2FyZC5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG59KTtcclxucG9wdXBBZGRDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBpbmZvVXNlciA9IG5ldyBVc2VySW5mbyh7XHJcbiAgICB0aXRsZTogcHJvZmlsZU5hbWUsXHJcbiAgICBhYm91dDogcHJvZmlsZURlc2NyaXB0aW9uXHJcbn0pO1xyXG5cclxuXHJcbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEVkaXQsICh7bmFtZSwgbGlua30pID0+IHtcclxuICAgIGFwaS5wYXRjaEluZm8oe25hbWUsIGxpbmt9KVxyXG4gICAgICAgIC50aGVuICgocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgICAgICAgIGluZm9Vc2VyLnNldFVzZXJJbmZvKHJlcy5uYW1lLCByZXMuYWJvdXQpO1xyXG4gICAgICAgICAgICBwb3B1cEVkaXRQcm9maWxlLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcbn0pO1xyXG5cclxucG9wdXBFZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuXHJcbi8v0J7RgtGA0LjRgdC+0LLQutCwINC00LXRhNC+0LvRgtC90YvRhSDQutCw0YDRgtC+0YfQtdC6XHJcbmFwaS5nZXRDYXJkKClcclxuICAgIC50aGVuICgocmVzKSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBTZWN0aW9uKHtcclxuICAgICAgICAgICAgaXRlbXM6IHJlcyxcclxuICAgICAgICAgICAgcmVuZGVyZXI6ICAoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2FyZFRlbXBsYXRlID0gY3JlYXRlQ2FyZChlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIGNhcmQuYWRkSXRlbShjYXJkVGVtcGxhdGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgJy5lbGVtZW50cycpO1xyXG4gICAgICAgIGNhcmQucmVuZGVySXRlbXMoKTtcclxuICAgIH0pO1xyXG5cclxuLy/RgdC70YPRiNCw0YLQtdC70Ywg0LrQvdC+0L/QutC4INC00L7QsdCw0LLQuNGC0YxcclxuYnV0dG9uQWRkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgcG9wdXBBZGRDYXJkLm9wZW4oKTtcclxuICAgIG5hbWVJbnB1dEFkZC52YWx1ZSA9ICcnO1xyXG4gICAgc3JjSW5wdXRBZGQudmFsdWUgPSAnJztcclxuICAgIGZvcm1BZGRWYWxpZGF0aW9uLmJsb2NrQnV0dG9uU2F2ZShwb3B1cEFkZCk7XHJcbn0pO1xyXG5cclxuLy/RgdC70YPRiNCw0YLQtdC70Ywg0LrQvdC+0L/QutC4INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Y9cclxuYnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGNvbnN0IGluZm9Gcm9tUGFnZSA9IGluZm9Vc2VyLmdldFVzZXJJbmZvKCk7XHJcbiAgICBuYW1lSW5wdXRFZGl0LnZhbHVlID0gaW5mb0Zyb21QYWdlLm5hbWU7XHJcbiAgICBqb2JJbnB1dEVkaXQudmFsdWUgPSBpbmZvRnJvbVBhZ2UuYWJvdXQ7XHJcbiAgICBwb3B1cEVkaXRQcm9maWxlLm9wZW4oKTtcclxufSk7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xyXG4gICAgICAgIHRoaXMuX3VybCA9IGNvbmZpZy5iYXNlVXJsO1xyXG4gICAgICAgIHRoaXMuX2hlYWRlcnMgPSBjb25maWcuaGVhZGVycztcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlUmVzcG9uc2UocmVzKSB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCfQn9GA0L7QuNC30L7RiNC70LAg0L7RiNC40LHQutCwJykpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbiAodGhpcy5faGFuZGxlUmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENhcmQoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbiAodGhpcy5faGFuZGxlUmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHBhdGNoSW5mbyhkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgYWJvdXQ6IGRhdGEubGlua1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuICh0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcG9zdENhcmQoZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgbGluazogZGF0YS5saW5rXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4gKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcclxuICAgIH1cclxufSIsIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3Ioe3RpdGxlLCBhYm91dH0pIHtcclxuICAgICAgICB0aGlzLl90aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMuX2Fib3V0ID0gYWJvdXQ7XHJcblxyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25hbWUnKTtcclxuICAgICAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZGVzY3JpcHRpb24nKTtcclxuICAgIH1cclxuXHJcbiAgICAvL9GB0L7QsdC40YDQsNC10YIg0LTQsNC90L3Ri9C1INGB0L4g0YHRgtGA0LDQvdC40YbRi1xyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgY29uc3QgZm9ybVRpdGxlID0gdGhpcy5fdGl0bGUudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgY29uc3QgZm9ybURlc2NyaXB0aW9uID0gdGhpcy5fYWJvdXQudGV4dENvbnRlbnQ7XHJcbiAgICAgICAgcmV0dXJuIHtuYW1lOiBmb3JtVGl0bGUsIGFib3V0OiBmb3JtRGVzY3JpcHRpb259O1xyXG4gICAgfVxyXG5cclxuICAgIC8v0YPRgdGC0LDQvdCw0LLQu9C40LLQsNC10YIg0L3QvtCy0L7QtSDQuNC80Y8g0Lgg0L7Qv9C40YHQsNC90LjQtVxyXG4gICAgc2V0VXNlckluZm8obmFtZSwgYWJvdXQpIHtcclxuICAgICAgICB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgICB9XHJcbn0iXSwibmFtZXMiOlsiU2VjdGlvbiIsImNvbnN0cnVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsInNlbGVjdG9yIiwidGhpcyIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9zZWxlY3RvciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInJlbmRlckl0ZW1zIiwiZm9yRWFjaCIsIml0ZW0iLCJQb3B1cCIsInBvcHVwIiwiX3BvcHVwU2VsZWN0b3IiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiY2xvc2UiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5Iiwib3BlbiIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdEZvcm0iLCJzdXBlciIsIl9oYW5kbGVTdWJtaXRGb3JtIiwiX2Zvcm0iLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9pbnB1dFZhbHVlTGlzdCIsIm5hbWUiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwiX2xpc3QiLCJ0aXRsZSIsImxpbmsiLCJhYm91dCIsInJlc2V0IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2Zvcm1FbGVtZW50IiwiX2NvbmZpZyIsIkFycmF5IiwiZnJvbSIsImlucHV0U2VsZWN0b3IiLCJfYnV0dG9uRWxlbWVudCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJpbnB1dEVycm9yQ2xhc3MiLCJ0ZXh0Q29udGVudCIsImVycm9yQ2xhc3MiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsImNvbnNvbGUiLCJsb2ciLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzb21lIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYmxvY2tCdXR0b25TYXZlIiwiZW5hYmxlVmFsaWRhdGlvbiIsIkNhcmQiLCJkYXRhIiwidGVtcGxhdGVTZWxlY3RvciIsIm9wZW5JbWFnZSIsIl9kYXRhIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfb3BlbkltYWdlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfZWxlbWVudFBob3RvIiwiY29udGVudCIsImNsb25lTm9kZSIsImJ1dHRvbkxpa2UiLCJidXR0b25UcmFzaCIsImljb25CdXR0b25MaWtlIiwidG9nZ2xlIiwiZ2VuZXJhdGVDYXJkIiwic3JjIiwiYWx0IiwicGFnZSIsImZvcm1FZGl0UHJvZmlsZSIsImZvcm1BZGRDYXJkIiwiaW1hZ2VGdWxsIiwiYnV0dG9uRWRpdCIsImJ1dHRvbkFkZCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicHJvZmlsZVBob3RvIiwicG9wdXBFZGl0IiwibmFtZUlucHV0RWRpdCIsImpvYklucHV0RWRpdCIsInBvcHVwQWRkIiwibmFtZUlucHV0QWRkIiwic3JjSW5wdXRBZGQiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZmllbGRzZXRTZWxlY3RvciIsInBvcHVwSW1hZ2VPYmplY3QiLCJfaW1hZ2UiLCJfZmlnY2FwdGlvbiIsImNyZWF0ZUNhcmQiLCJmb3JtQWRkVmFsaWRhdGlvbiIsImZvcm1FZGl0VmFsaWRhdGlvbiIsImFwaSIsIl91cmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiX2hhbmRsZVJlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsIkVycm9yIiwiZ2V0SW5mbyIsImZldGNoIiwidGhlbiIsImdldENhcmQiLCJwYXRjaEluZm8iLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInBvc3RDYXJkIiwiYXV0aG9yaXphdGlvbiIsImF2YXRhciIsInBvcHVwQWRkQ2FyZCIsImNhcmRUZW1wbGF0ZSIsImNhcmQiLCJpbmZvVXNlciIsIl90aXRsZSIsIl9hYm91dCIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlRGVzY3JpcHRpb24iLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwicG9wdXBFZGl0UHJvZmlsZSIsImluZm9Gcm9tUGFnZSJdLCJzb3VyY2VSb290IjoiIn0=