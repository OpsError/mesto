(()=>{"use strict";class e{constructor({items:e,renderer:t},s){this._items=e,this._renderer=t,this._selector=document.querySelector(s)}addItem(e){this._selector.prepend(e)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}}class t{constructor(e){this._popupSelector=e,this._handleEscClose=this._handleEscClose.bind(this)}close(){this._popupSelector.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}open(){this._popupSelector.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popupSelector.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup")||e.target.classList.contains("popup__close-icon"))&&this.close()}))}}class s extends t{constructor(e,t){super(e),this._handleSubmitForm=t,this._form=e.querySelector(".popup__form"),this._inputList=e.querySelectorAll(".popup__input")}_getInputValues(){return this._inputValueList={},this._inputList.forEach((e=>{this._inputValueList[e.name]=e.value})),this._inputValueList}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._list=this._getInputValues(),this._handleSubmitForm({name:this._list.title,link:this._list.about})})),super.setEventListeners()}close(){super.close(),this._form.reset()}}class n{constructor(e,t){this._formElement=t,this._config=e,this._inputList=Array.from(t.querySelectorAll(this._config.inputSelector)),this._buttonElement=t.querySelector(this._config.submitButtonSelector)}_showInputError=(e,t)=>{const s=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._config.inputErrorClass),s.textContent=t,s.classList.add(this._config.errorClass)};_hideInputError=e=>{const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClass),t.textContent=""};_checkInputValidity=e=>{e.validity.valid?this._hideInputError(e):(console.log(e.validationMessage),this._showInputError(e,e.validationMessage))};_hasInvalidInput=()=>this._inputList.some((e=>!e.validity.valid));_toggleButtonState=()=>{this._hasInvalidInput()?(this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1)};_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}blockButtonSave(e){this._buttonElement.classList.add("popup__save_inactive"),this._buttonElement.disabled=!0}enableValidation(){this._setEventListeners()}}class o{constructor(e,t,{openImage:s}){this._data=e,this._templateSelector=t,this._openImage=s,this._element=this._getTemplate(),this._elementPhoto=this._element.querySelector(".element__photo"),this._countLikes=this._element.querySelector(".element__like-number")}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}_setEventListeners(){const e=this._element.querySelector(".element__like"),t=this._element.querySelector(".element__trash"),s=this._element.querySelector(".element__like-icon");e.addEventListener("click",(()=>{s.classList.toggle("element__like-icon_active")})),t.addEventListener("click",(()=>{this._element.remove(),this._element=null})),this._elementPhoto.addEventListener("click",(()=>{this._openImage({link:this._data.link,name:this._data.name})}))}generateCard(){return this._elementPhoto.src=this._data.link,this._elementPhoto.alt=this._data.name,this._element.querySelector(".element__description").textContent=this._data.name,this._countLikes.textContent=this._data.likes.length+1,this._setEventListeners(),this._element}}const i=document.querySelector(".page"),r=i.querySelector(".form-edit"),l=i.querySelector(".form-add"),a=document.querySelector(".popup_image-full"),_=i.querySelector(".profile__edit-button"),c=i.querySelector(".profile__add-button"),u=i.querySelector(".profile__name"),p=i.querySelector(".profile__description"),h=i.querySelector(".profile__photo"),d=r.querySelector(".popup"),m=r.querySelector(".popup__input_type_name"),S=r.querySelector(".popup__input_type_description"),f=l.querySelector(".popup"),y=l.querySelector(".popup__input_type_title"),v=l.querySelector(".popup__input_type_link"),g=(a.querySelector(".popup"),{fieldsetSelector:".popup__form-set",inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"}),E=new class extends t{constructor(e){super(e),this._image=this._popupSelector.querySelector(".popup__image"),this._figcaption=this._popupSelector.querySelector(".popup__figcaption")}open(e,t){this._image.src=t,this._image.alt=e,this._figcaption.textContent=e,super.open()}}(a);function L({link:e,name:t}){E.open(t,e)}function b(e){return new o(e,"#element",{openImage:L}).generateCard()}E.setEventListeners();const q=new n(g,l.querySelector(".popup__form")),k=new n(g,r.querySelector(".popup__form"));q.enableValidation(),k.enableValidation();const C=new class{constructor(e){this._url=e.baseUrl,this._headers=e.headers}_handleResponse(e){return e.ok?e.json():Promise.reject(new Error("Произошла ошибка"))}getInfo(){return fetch(`${this._url}/users/me`,{headers:this._headers}).then(this._handleResponse)}getCard(){return fetch(`${this._url}/cards`,{headers:this._headers}).then(this._handleResponse)}patchInfo(e){return fetch(`${this._url}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.link})}).then(this._handleResponse)}postCard(e){return fetch(`${this._url}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._handleResponse)}}({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{authorization:"11c262d9-4172-458c-924e-d3009da526d4","Content-type":"application/json"}});C.getInfo().then((e=>{u.textContent=e.name,p.textContent=e.about,h.src=e.avatar,console.log(e)}));const I=new s(f,(({name:t,link:s})=>{C.postCard({name:t,link:s}).then((t=>{const s=b(t);console.log(s);const n=new e({items:t,renderer:e=>{const t=b(e);n.addItem(t)}},".elements");n.addItem(s),I.close()}))}));I.setEventListeners();const w=new class{constructor({title:e,about:t}){this._title=e,this._about=t,this._profileName=document.querySelector(".profile__name"),this._profileDescription=document.querySelector(".profile__description")}getUserInfo(){return{name:this._title.textContent,about:this._about.textContent}}setUserInfo(e,t){this._profileName.textContent=e,this._profileDescription.textContent=t}}({title:u,about:p}),x=new s(d,(({name:e,link:t})=>{C.patchInfo({name:e,link:t}).then((e=>{console.log(e),w.setUserInfo(e.name,e.about),x.close()}))}));x.setEventListeners(),C.getCard().then((t=>{const s=new e({items:t,renderer:e=>{const t=b(e);s.addItem(t)}},".elements");s.renderItems()})),c.addEventListener("click",(()=>{I.open(),y.value="",v.value="",q.blockButtonSave(f)})),_.addEventListener("click",(()=>{const e=w.getUserInfo();m.value=e.name,S.value=e.about,x.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aEosUUFBUStJLEVBQWEsR0FFL0IsYUFDSEMsRUFBSzdJLGFBQWEsSUFJMUJpRyxFQUFVakYsaUJBQWlCLFNBQVMsS0FDaEMySCxFQUFhN0gsT0FDYjJGLEVBQWEzRSxNQUFRLEdBQ3JCNEUsRUFBWTVFLE1BQVEsR0FDcEJtRixFQUFrQjdDLGdCQUFnQm9DLEVBQVMsSUFJL0NSLEVBQVdoRixpQkFBaUIsU0FBUyxLQUNqQyxNQUFNc0ksRUFBZVIsRUFBU0ssY0FDOUI3QyxFQUFjeEUsTUFBUXdILEVBQWF6SCxLQUNuQzBFLEVBQWF6RSxNQUFRd0gsRUFBYW5ILE1BQ2xDa0gsRUFBaUJ2SSxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBzZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgICAgICB0aGlzLl9zZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEl0ZW0gKGVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9zZWxlY3Rvci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXApIHtcclxuICAgICAgICB0aGlzLl9wb3B1cFNlbGVjdG9yID0gcG9wdXA7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAnKSB8fCAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1pY29uJykpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwLCBoYW5kbGVTdWJtaXRGb3JtKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXApO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdEZvcm0gPSBoYW5kbGVTdWJtaXRGb3JtO1xyXG5cclxuICAgICAgICB0aGlzLl9mb3JtID0gcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8v0YHQvtCx0LjRgNCw0LXRgiDQtNCw0L3QvdGL0LUg0YEg0L/QvtC70LXQuVxyXG4gICAgX2dldElucHV0VmFsdWVzICgpIHtcclxuICAgICAgICB0aGlzLl9pbnB1dFZhbHVlTGlzdCA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lucHV0VmFsdWVMaXN0W2l0ZW0ubmFtZV0gPSBpdGVtLnZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRWYWx1ZUxpc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9saXN0ID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLl9saXN0LnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgLy/QsiBsaW5rINC/0YDQvtCx0LvQtdC80LAuINC90LDQtNC+INGA0LXRiNC40YLRjFxyXG4gICAgICAgICAgICAgICAgbGluazogdGhpcy5fbGlzdC5hYm91dH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yIChjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy/RgdC60YDRi9GC0Ywg0L7RiNC40LHQutGDINCy0LLQvtC00LBcclxuICAgIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvL9C/0YDQvtCy0LXRgNC60LAg0YTQvtGA0LzRiyDQvdCwINCy0LDQu9C40LTQvdC+0YHRgtGMXHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7IC8v0LXRgdC70Lgg0LXRgdGC0Ywg0L7RiNC40LHQutCwXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy/Qv9GA0L7QstC10YDQutCwINC60LDQttC00L7Qs9C+INC/0L7Qu9GPINC90LAg0L7RiNC40LHQutGDINCyINC/0L7Qu9C1INCy0LLQvtC00LBcclxuICAgIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvL9GB0LTQtdC70LDRgtGMINC60L3QvtC/0LrRgyDQvdC10LDQutGC0LjQstC90L7QuSjQsNC60YLQuNCy0L3QvtC5KSDQv9GA0Lgg0L7RiNC40LHQutC1KNC/0YDQsNCy0LjQu9GM0L3QvtC8INCy0LLQvtC00LUpXHJcbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvL9GD0YHRgtCw0L3QvtCy0LjRgtGMINGB0LvRg9GI0LDRgtC10LvQuCDQvdCwINC60LDQttC00YPRjiDRhNC+0YDQvNGDXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMgKCkge1xyXG4gICAgICAgIC8v0L/RgNC+0LLQtdGA0LjRgtGMINC60L3QvtC/0LrRgyDQv9GA0Lgg0L7RgtC60YDRi9GC0LjQuCDRhNC+0YDQvNGLXHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgXHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCk9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAvL9C/0YDQvtCy0LXRgNGP0YLRjCDQutC90L7Qv9C60YMg0L/RgNC4INCy0LLQvtC00LUg0LrQsNC20LTQvtCz0L4g0YHQuNC80LLQvtC70LBcclxuICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgLy/Qt9Cw0LHQu9C+0LrQuNGA0L7QstCw0YLRjCDQutC90L7Qv9C60YMg0L/RgNC4INC+0YLQutGA0YvRgtC40Lgg0L/QvtC/0LDQv9CwXHJcbiAgICBibG9ja0J1dHRvblNhdmUocG9wdXApIHtcclxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcHVwX19zYXZlX2luYWN0aXZlJyk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICAgIFxyXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEsIHRlbXBsYXRlU2VsZWN0b3IsIHtvcGVuSW1hZ2V9KSB7XHJcbiAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fb3BlbkltYWdlID0gb3BlbkltYWdlO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRQaG90byA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3Bob3RvJyk7XHJcbiAgICAgICAgdGhpcy5fY291bnRMaWtlcyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UtbnVtYmVyJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy/QstC+0LfQstGA0LDRidCw0LXRgiDRgdC10LvQtdC60YLQvtGAINGI0LDQsdC70L7QvdCwXHJcbiAgICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxyXG4gICAgICAgLmNvbnRlbnRcclxuICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpXHJcbiAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICAvL9GD0YHRgtCw0L3QvtCy0YnQuNC6INGB0L7QsdGL0YLQuNC5XHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UnKTtcclxuICAgICAgICBjb25zdCBidXR0b25UcmFzaCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RyYXNoJyk7XHJcbiAgICAgICAgY29uc3QgaWNvbkJ1dHRvbkxpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWljb24nKTtcclxuXHJcbiAgICAgICAgLy/Qu9Cw0LnQulxyXG4gICAgICAgIGJ1dHRvbkxpa2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGljb25CdXR0b25MaWtlLmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX2xpa2UtaWNvbl9hY3RpdmUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/Rg9C00LDQu9C40YLRjFxyXG4gICAgICAgIGJ1dHRvblRyYXNoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/QvtGC0LrRgNGL0YLRjCDRhNC+0YLQvtCz0YDQsNGE0LjRjlxyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRQaG90by5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fb3BlbkltYWdlKHtsaW5rOiB0aGlzLl9kYXRhLmxpbmssIG5hbWU6IHRoaXMuX2RhdGEubmFtZX0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIC8v0YPRgdGC0LDQvdCw0LLQu9C40LLQsNC10YIg0LrQsNGA0YLQvtGH0LrQtSDQvdCw0LfQstCw0L3QuNC1LCDQutCw0YDRgtC40L3QutGDINC4INC+0L/QuNGB0LDQvdC40LVcclxuICAgIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50UGhvdG8uc3JjID0gdGhpcy5fZGF0YS5saW5rO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRQaG90by5hbHQgPSB0aGlzLl9kYXRhLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fZGVzY3JpcHRpb24nKS50ZXh0Q29udGVudCA9IHRoaXMuX2RhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9jb3VudExpa2VzLnRleHRDb250ZW50ID0gdGhpcy5fZGF0YS5saWtlcy5sZW5ndGggKyAxO1xyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuXHJcbi8vIGV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbi8vICAgICB7XHJcbi8vICAgICAgIG5hbWU6ICfQnNCw0L3QtNC20LjRgNC+INCh0LDQvdC+JyxcclxuLy8gICAgICAgZGVzY3JpcHRpb246ICdodHRwczovL2kucGluaW1nLmNvbS81NjR4L2EyL2RiLzczL2EyZGI3Mzg5NmU3ZDk3ODViYzNlZTM3ODFjNTQ0ZmFlLmpwZydcclxuLy8gICAgIH0sXHJcbi8vICAgICB7XHJcbi8vICAgICAgIG5hbWU6ICfQodCw0YLQvtGA0YMg0JPQvtC00LfRkScsXHJcbi8vICAgICAgIGRlc2NyaXB0aW9uOiAnaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC9iZC85ZS8wYy9iZDllMGM3OGE1YWYwNTU3ZjZiZmQ1Njk4ZDA3NDdhMi5qcGcnXHJcbi8vICAgICB9LFxyXG4vLyAgICAge1xyXG4vLyAgICAgICBuYW1lOiAn0KTRg9GI0LgnLFxyXG4vLyAgICAgICBkZXNjcmlwdGlvbjogJ2h0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvYTgvNjIvYTUvYTg2MmE1NWYxMTFkNTgwYTJkYTY1MTU0ZDk3NjAzOTcuanBnJ1xyXG4vLyAgICAgfSxcclxuLy8gICAgIHtcclxuLy8gICAgICAgbmFtZTogJ9Ct0YDQtdC9INCZ0LXQs9C10YAnLFxyXG4vLyAgICAgICBkZXNjcmlwdGlvbjogJ2h0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvZjcvNjgvNmQvZjc2ODZkZmEwNGFkNDhhZjk1NDk3YzkzMDNiMjY0NzEuanBnJ1xyXG4vLyAgICAgfSxcclxuLy8gICAgIHtcclxuLy8gICAgICAgbmFtZTogJ9Cu0LTQt9C4INCY0YLQsNC00L7RgNC4JyxcclxuLy8gICAgICAgZGVzY3JpcHRpb246ICdodHRwczovL2kucGluaW1nLmNvbS81NjR4LzA5L2FkLzczLzA5YWQ3M2NjNGVlM2JiMTkwNWY5Mzc0ZmY3OWY1ODIzLmpwZydcclxuLy8gICAgIH0sXHJcbi8vICAgICB7XHJcbi8vICAgICAgIG5hbWU6ICfQmtGR0LTQt9C40YDQviDQoNC10L3Qs9C+0LrRgycsXHJcbi8vICAgICAgIGRlc2NyaXB0aW9uOiAnaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC8xMS83NS9kMS8xMTc1ZDFiYjcwMTE0MzA2YjdiMzFhYmVhZTExYjY5Yy5qcGcnXHJcbi8vICAgICB9XHJcbi8vICAgXTtcclxuICBcclxuY29uc3QgcGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYWdlJyk7XHJcbiAgXHJcbmV4cG9ydCBjb25zdCBmb3JtRWRpdFByb2ZpbGUgPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWVkaXQnKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1BZGRDYXJkID0gcGFnZS5xdWVyeVNlbGVjdG9yKCcuZm9ybS1hZGQnKTtcclxuZXhwb3J0IGNvbnN0IGltYWdlRnVsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9pbWFnZS1mdWxsJyk7XHJcbiAgXHJcbmV4cG9ydCBjb25zdCBidXR0b25FZGl0ID0gcGFnZS5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcclxuZXhwb3J0IGNvbnN0IGJ1dHRvbkFkZCA9IHBhZ2UucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gcGFnZS5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fbmFtZScpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gcGFnZS5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZGVzY3JpcHRpb24nKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVQaG90byA9IHBhZ2UucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3Bob3RvJyk7XHJcbiAgXHJcbmV4cG9ydCBjb25zdCBwb3B1cEVkaXQgPSBmb3JtRWRpdFByb2ZpbGUucXVlcnlTZWxlY3RvcignLnBvcHVwJyk7XHJcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXRFZGl0ID0gZm9ybUVkaXRQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBqb2JJbnB1dEVkaXQgPSBmb3JtRWRpdFByb2ZpbGUucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX2Rlc2NyaXB0aW9uJyk7XHJcbiAgXHJcbmV4cG9ydCBjb25zdCBwb3B1cEFkZCA9IGZvcm1BZGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cCcpO1xyXG5leHBvcnQgY29uc3QgbmFtZUlucHV0QWRkID0gZm9ybUFkZENhcmQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF90eXBlX3RpdGxlJyk7XHJcbmV4cG9ydCBjb25zdCBzcmNJbnB1dEFkZCA9IGZvcm1BZGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9saW5rJyk7XHJcbiAgXHJcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlID0gaW1hZ2VGdWxsLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cCcpO1xyXG4gIFxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmaWVsZHNldFNlbGVjdG9yOiAnLnBvcHVwX19mb3JtLXNldCcsXHJcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19zYXZlJyxcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX3NhdmVfaW5hY3RpdmUnLFxyXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcclxuICBlcnJvckNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZSdcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2VPYmplY3QgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoaW1hZ2VGdWxsKTtcclxucG9wdXBJbWFnZU9iamVjdC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy/QvtGC0LrRgNGL0YLRjCDQutCw0YDRgtC40L3QutGDXHJcbmV4cG9ydCBmdW5jdGlvbiBvcGVuSW1hZ2UgKHtsaW5rLCBuYW1lfSkge1xyXG4gIHBvcHVwSW1hZ2VPYmplY3Qub3BlbihuYW1lLCBsaW5rKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhcmQoZWxlbWVudCkge1xyXG4gIGNvbnN0IGVsZW1lbnRDYXJkID0gbmV3IENhcmQoZWxlbWVudCwgJyNlbGVtZW50Jywge29wZW5JbWFnZX0pO1xyXG4gIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGVsZW1lbnRDYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG5cclxuICByZXR1cm4gY2FyZFRlbXBsYXRlO1xyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwKTtcclxuXHJcbiAgICAgICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuICAgICAgICB0aGlzLl9maWdjYXB0aW9uID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ZpZ2NhcHRpb24nKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgICAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5fZmlnY2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcblxyXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XHJcbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnO1xyXG5cclxuaW1wb3J0IHsgdmFsaWRhdGlvbkNvbmZpZywgZm9ybUFkZENhcmQsIGZvcm1FZGl0UHJvZmlsZSwgcG9wdXBBZGQsIHBvcHVwRWRpdCwgYnV0dG9uQWRkLCBidXR0b25FZGl0LCBuYW1lSW5wdXRBZGQsIG5hbWVJbnB1dEVkaXQsIHNyY0lucHV0QWRkLCBqb2JJbnB1dEVkaXQsXHJcbnByb2ZpbGVOYW1lLCBwcm9maWxlRGVzY3JpcHRpb24sIHByb2ZpbGVQaG90b30gZnJvbSAnLi4vdXRpbHMvdXRpbHMuanMnO1xyXG5pbXBvcnQgeyBvcGVuSW1hZ2UsIGNyZWF0ZUNhcmQgfSBmcm9tICcuLi91dGlscy91dGlscy5qcyc7XHJcblxyXG4vLyDQktCw0LvQuNC00LDRhtC40Y9cclxuY29uc3QgZm9ybUFkZFZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtQWRkQ2FyZC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKSk7XHJcbmNvbnN0IGZvcm1FZGl0VmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm1FZGl0UHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKSk7XHJcbmZvcm1BZGRWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZm9ybUVkaXRWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gICAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjAnLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246ICcxMWMyNjJkOS00MTcyLTQ1OGMtOTI0ZS1kMzAwOWRhNTI2ZDQnLFxyXG4gICAgICAgICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgIH1cclxufSk7XHJcblxyXG4vL9C/0YDQuCDQt9Cw0LPRgNGD0LfQutC1INGB0YLRgNCw0L3QuNGG0Ysg0LjQvNGPINC4INC+0L/QuNGB0LDQvdC40LUg0YEg0YHQtdGA0LLQtdGA0LBcclxuYXBpLmdldEluZm8oKVxyXG4gICAgLnRoZW4gKChyZXMpID0+IHtcclxuICAgICAgICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IHJlcy5uYW1lO1xyXG4gICAgICAgIHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHJlcy5hYm91dDtcclxuICAgICAgICBwcm9maWxlUGhvdG8uc3JjID0gcmVzLmF2YXRhcjtcclxuICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuY29uc3QgcG9wdXBBZGRDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBBZGQsICh7bmFtZSwgbGlua30pID0+IHtcclxuICAgIGFwaS5wb3N0Q2FyZCh7bmFtZSwgbGlua30pXHJcbiAgICAgICAgLnRoZW4gKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2FyZFRlbXBsYXRlID0gY3JlYXRlQ2FyZChyZXMpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjYXJkVGVtcGxhdGUpO1xyXG4gICAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IFNlY3Rpb24oe1xyXG4gICAgICAgICAgICAgICAgaXRlbXM6IHJlcyxcclxuICAgICAgICAgICAgICAgIHJlbmRlcmVyOiAgKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBjcmVhdGVDYXJkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcmQuYWRkSXRlbShjYXJkVGVtcGxhdGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAnLmVsZW1lbnRzJyk7XHJcbiAgICAgICAgICAgIGNhcmQuYWRkSXRlbShjYXJkVGVtcGxhdGUpO1xyXG5cclxuICAgICAgICAgICAgcG9wdXBBZGRDYXJkLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcbn0pO1xyXG5wb3B1cEFkZENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGluZm9Vc2VyID0gbmV3IFVzZXJJbmZvKHtcclxuICAgIHRpdGxlOiBwcm9maWxlTmFtZSxcclxuICAgIGFib3V0OiBwcm9maWxlRGVzY3JpcHRpb25cclxufSk7XHJcblxyXG5cclxuY29uc3QgcG9wdXBFZGl0UHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwRWRpdCwgKHtuYW1lLCBsaW5rfSkgPT4ge1xyXG4gICAgYXBpLnBhdGNoSW5mbyh7bmFtZSwgbGlua30pXHJcbiAgICAgICAgLnRoZW4gKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICAgICAgaW5mb1VzZXIuc2V0VXNlckluZm8ocmVzLm5hbWUsIHJlcy5hYm91dCk7XHJcbiAgICAgICAgICAgIHBvcHVwRWRpdFByb2ZpbGUuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxufSk7XHJcblxyXG5wb3B1cEVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5cclxuLy/QntGC0YDQuNGB0L7QstC60LAg0LTQtdGE0L7Qu9GC0L3Ri9GFINC60LDRgNGC0L7Rh9C10LpcclxuYXBpLmdldENhcmQoKVxyXG4gICAgLnRoZW4gKChyZXMpID0+IHtcclxuICAgICAgICBjb25zdCBjYXJkID0gbmV3IFNlY3Rpb24oe1xyXG4gICAgICAgICAgICBpdGVtczogcmVzLFxyXG4gICAgICAgICAgICByZW5kZXJlcjogIChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBjcmVhdGVDYXJkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgY2FyZC5hZGRJdGVtKGNhcmRUZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCAnLmVsZW1lbnRzJyk7XHJcbiAgICAgICAgY2FyZC5yZW5kZXJJdGVtcygpO1xyXG4gICAgfSk7XHJcblxyXG4vL9GB0LvRg9GI0LDRgtC10LvRjCDQutC90L7Qv9C60Lgg0LTQvtCx0LDQstC40YLRjFxyXG5idXR0b25BZGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBwb3B1cEFkZENhcmQub3BlbigpO1xyXG4gICAgbmFtZUlucHV0QWRkLnZhbHVlID0gJyc7XHJcbiAgICBzcmNJbnB1dEFkZC52YWx1ZSA9ICcnO1xyXG4gICAgZm9ybUFkZFZhbGlkYXRpb24uYmxvY2tCdXR0b25TYXZlKHBvcHVwQWRkKTtcclxufSk7XHJcblxyXG4vL9GB0LvRg9GI0LDRgtC10LvRjCDQutC90L7Qv9C60Lgg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRj1xyXG5idXR0b25FZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgY29uc3QgaW5mb0Zyb21QYWdlID0gaW5mb1VzZXIuZ2V0VXNlckluZm8oKTtcclxuICAgIG5hbWVJbnB1dEVkaXQudmFsdWUgPSBpbmZvRnJvbVBhZ2UubmFtZTtcclxuICAgIGpvYklucHV0RWRpdC52YWx1ZSA9IGluZm9Gcm9tUGFnZS5hYm91dDtcclxuICAgIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xyXG59KTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5fdXJsID0gY29uZmlnLmJhc2VVcmw7XHJcbiAgICAgICAgdGhpcy5faGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVSZXNwb25zZShyZXMpIHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ9Cf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAnKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW5mbygpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuICh0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2FyZCgpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuICh0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcGF0Y2hJbmZvKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBhYm91dDogZGF0YS5saW5rXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4gKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcclxuICAgIH1cclxuXHJcbiAgICBwb3N0Q2FyZChkYXRhKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBsaW5rOiBkYXRhLmxpbmtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbiAodGhpcy5faGFuZGxlUmVzcG9uc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIFxyXG59IiwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7dGl0bGUsIGFib3V0fSkge1xyXG4gICAgICAgIHRoaXMuX3RpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy5fYWJvdXQgPSBhYm91dDtcclxuXHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fbmFtZScpO1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19kZXNjcmlwdGlvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIC8v0YHQvtCx0LjRgNCw0LXRgiDQtNCw0L3QvdGL0LUg0YHQviDRgdGC0YDQsNC90LjRhtGLXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICBjb25zdCBmb3JtVGl0bGUgPSB0aGlzLl90aXRsZS50ZXh0Q29udGVudDtcclxuICAgICAgICBjb25zdCBmb3JtRGVzY3JpcHRpb24gPSB0aGlzLl9hYm91dC50ZXh0Q29udGVudDtcclxuICAgICAgICByZXR1cm4ge25hbWU6IGZvcm1UaXRsZSwgYWJvdXQ6IGZvcm1EZXNjcmlwdGlvbn07XHJcbiAgICB9XHJcblxyXG4gICAgLy/Rg9GB0YLQsNC90LDQstC70LjQstCw0LXRgiDQvdC+0LLQvtC1INC40LzRjyDQuCDQvtC/0LjRgdCw0L3QuNC1XHJcbiAgICBzZXRVc2VySW5mbyhuYW1lLCBhYm91dCkge1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICB0aGlzLl9wcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBhYm91dDtcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJTZWN0aW9uIiwiY29uc3RydWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwic2VsZWN0b3IiLCJ0aGlzIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX3NlbGVjdG9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwicmVuZGVySXRlbXMiLCJmb3JFYWNoIiwiaXRlbSIsIlBvcHVwIiwicG9wdXAiLCJfcG9wdXBTZWxlY3RvciIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJjbG9zZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJvcGVuIiwiYWRkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Rm9ybSIsInN1cGVyIiwiX2hhbmRsZVN1Ym1pdEZvcm0iLCJfZm9ybSIsIl9pbnB1dExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2dldElucHV0VmFsdWVzIiwiX2lucHV0VmFsdWVMaXN0IiwibmFtZSIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJfbGlzdCIsInRpdGxlIiwibGluayIsImFib3V0IiwicmVzZXQiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJfY29uZmlnIiwiQXJyYXkiLCJmcm9tIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsImlucHV0RXJyb3JDbGFzcyIsInRleHRDb250ZW50IiwiZXJyb3JDbGFzcyIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiY29uc29sZSIsImxvZyIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJibG9ja0J1dHRvblNhdmUiLCJlbmFibGVWYWxpZGF0aW9uIiwiQ2FyZCIsImRhdGEiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwib3BlbkltYWdlIiwiX2RhdGEiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9vcGVuSW1hZ2UiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9lbGVtZW50UGhvdG8iLCJfY291bnRMaWtlcyIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJidXR0b25MaWtlIiwiYnV0dG9uVHJhc2giLCJpY29uQnV0dG9uTGlrZSIsInRvZ2dsZSIsImdlbmVyYXRlQ2FyZCIsInNyYyIsImFsdCIsImxpa2VzIiwibGVuZ3RoIiwicGFnZSIsImZvcm1FZGl0UHJvZmlsZSIsImZvcm1BZGRDYXJkIiwiaW1hZ2VGdWxsIiwiYnV0dG9uRWRpdCIsImJ1dHRvbkFkZCIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicHJvZmlsZVBob3RvIiwicG9wdXBFZGl0IiwibmFtZUlucHV0RWRpdCIsImpvYklucHV0RWRpdCIsInBvcHVwQWRkIiwibmFtZUlucHV0QWRkIiwic3JjSW5wdXRBZGQiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZmllbGRzZXRTZWxlY3RvciIsInBvcHVwSW1hZ2VPYmplY3QiLCJfaW1hZ2UiLCJfZmlnY2FwdGlvbiIsImNyZWF0ZUNhcmQiLCJmb3JtQWRkVmFsaWRhdGlvbiIsImZvcm1FZGl0VmFsaWRhdGlvbiIsImFwaSIsIl91cmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiX2hhbmRsZVJlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsIkVycm9yIiwiZ2V0SW5mbyIsImZldGNoIiwidGhlbiIsImdldENhcmQiLCJwYXRjaEluZm8iLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInBvc3RDYXJkIiwiYXV0aG9yaXphdGlvbiIsImF2YXRhciIsInBvcHVwQWRkQ2FyZCIsImNhcmRUZW1wbGF0ZSIsImNhcmQiLCJpbmZvVXNlciIsIl90aXRsZSIsIl9hYm91dCIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlRGVzY3JpcHRpb24iLCJnZXRVc2VySW5mbyIsInNldFVzZXJJbmZvIiwicG9wdXBFZGl0UHJvZmlsZSIsImluZm9Gcm9tUGFnZSJdLCJzb3VyY2VSb290IjoiIn0=