(()=>{"use strict";class e{constructor({items:e,renderer:t},s){this._items=e,this._renderer=t,this._selector=document.querySelector(s)}addItem(e){this._selector.prepend(e)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}}class t{constructor(e){this._popupSelector=e,this._handleEscClose=this._handleEscClose.bind(this)}close(){this._popupSelector.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}open(){this._popupSelector.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popupSelector.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup")||e.target.classList.contains("popup__close-icon"))&&this.close()}))}}class s extends t{constructor(e,t){super(e),this._handleSubmitForm=t,this._form=e.querySelector(".popup__form"),this._inputList=e.querySelectorAll(".popup__input")}_getInputValues(){return this._inputValueList={},this._inputList.forEach((e=>{this._inputValueList[e.name]=e.value})),this._inputValueList}setEventListeners(){this._form.addEventListener("submit",(e=>{e.preventDefault(),this._list=this._getInputValues(),this._handleSubmitForm({name:this._list.title,about:this._list.about})})),super.setEventListeners()}close(){super.close(),this._form.reset()}}class n{constructor(e,t){this._formElement=t,this._config=e,this._inputList=Array.from(t.querySelectorAll(this._config.inputSelector)),this._buttonElement=t.querySelector(this._config.submitButtonSelector)}_showInputError=(e,t)=>{const s=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._config.inputErrorClass),s.textContent=t,s.classList.add(this._config.errorClass)};_hideInputError=e=>{const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClass),t.textContent=""};_checkInputValidity=e=>{e.validity.valid?this._hideInputError(e):(console.log(e.validationMessage),this._showInputError(e,e.validationMessage))};_hasInvalidInput=()=>this._inputList.some((e=>!e.validity.valid));_toggleButtonState=()=>{this._hasInvalidInput()?(this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1)};_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}blockButtonSave(e){this._buttonElement.classList.add("popup__save_inactive"),this._buttonElement.disabled=!0}enableValidation(){this._setEventListeners()}}class o{constructor(e,t,{openImage:s}){this._data=e,this._templateSelector=t,this._openImage=s,this._element=this._getTemplate(),this._elementPhoto=this._element.querySelector(".element__photo")}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}_setEventListeners(){const e=this._element.querySelector(".element__like"),t=this._element.querySelector(".element__trash"),s=this._element.querySelector(".element__like-icon");e.addEventListener("click",(()=>{s.classList.toggle("element__like-icon_active")})),t.addEventListener("click",(()=>{this._element.remove(),this._element=null})),this._elementPhoto.addEventListener("click",(()=>{this._openImage({link:this._data.link,name:this._data.name})}))}generateCard(){return this._elementPhoto.src=this._data.link,this._elementPhoto.alt=this._data.name,this._element.querySelector(".element__description").textContent=this._data.name,this._setEventListeners(),this._element}}const i=document.querySelector(".page"),r=i.querySelector(".form-edit"),l=i.querySelector(".form-add"),a=document.querySelector(".popup_image-full"),_=i.querySelector(".profile__edit-button"),c=i.querySelector(".profile__add-button"),p=i.querySelector(".profile__name"),u=i.querySelector(".profile__description"),h=i.querySelector(".profile__photo"),d=r.querySelector(".popup"),m=r.querySelector(".popup__input_type_name"),S=r.querySelector(".popup__input_type_description"),f=l.querySelector(".popup"),v=l.querySelector(".popup__input_type_title"),y=l.querySelector(".popup__input_type_link"),g=(a.querySelector(".popup"),{fieldsetSelector:".popup__form-set",inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_inactive",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"}),E=new class extends t{constructor(e){super(e),this._image=this._popupSelector.querySelector(".popup__image"),this._figcaption=this._popupSelector.querySelector(".popup__figcaption")}open(e,t){this._image.src=t,this._image.alt=e,this._figcaption.textContent=e,super.open()}}(a);function b({link:e,name:t}){E.open(t,e)}function L(e){return new o(e,"#element",{openImage:b}).generateCard()}E.setEventListeners();const q=new n(g,l.querySelector(".popup__form")),C=new n(g,r.querySelector(".popup__form"));q.enableValidation(),C.enableValidation();const I=new class{constructor(e){this._url=e.baseUrl,this._headers=e.headers}_handleResponse(e){return e.ok?e.json():Promise.reject(new Error("Произошла ошибка"))}getInfo(){return fetch(`${this._url}/users/me`,{headers:this._headers}).then(this._handleResponse)}getCard(){return fetch(`${this._url}/cards`,{headers:this._headers}).then(this._handleResponse)}patchInfo(e){return fetch(`${this._url}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._handleResponse)}}({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-60",headers:{authorization:"11c262d9-4172-458c-924e-d3009da526d4","Content-type":"application/json"}});I.getInfo().then((e=>{p.textContent=e.name,u.textContent=e.about,h.src=e.avatar,console.log(e)}));const k=new s(f,(({name:e,description:t})=>{const s=L({name:e,description:t});card.addItem(s),k.close()}));k.setEventListeners();const w=new class{constructor({title:e,about:t}){this._title=e,this._about=t,this._profileName=document.querySelector(".profile__name"),this._profileDescription=document.querySelector(".profile__description")}getUserInfo(){return{name:this._title.textContent,about:this._about.textContent}}setUserInfo(e,t){this._profileName.textContent=e,this._profileDescription.textContent=t}}({title:p,about:u}),x=new s(d,(({name:e,about:t})=>{I.patchInfo({name:e,about:t}).then((e=>{console.log(e),w.setUserInfo(e.name,e.about),x.close()}))}));x.setEventListeners(),I.getCard().then((t=>{const s=new e({items:t,renderer:e=>{const t=L(e);s.addItem(t)}},".elements");s.renderItems()})),c.addEventListener("click",(()=>{k.open(),v.value="",y.value="",q.blockButtonSave(f)})),_.addEventListener("click",(()=>{const e=w.getUserInfo();m.value=e.name,S.value=e.about,x.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxLQUFLc0osT0FBT3pGLFlBRXhDLENBR0E2RixZQUFZcEgsRUFBTUssR0FDZDNDLEtBQUt1SixhQUFhMUYsWUFBY3ZCLEVBQ2hDdEMsS0FBS3dKLG9CQUFvQjNGLFlBQWNsQixDQUMzQyxHRnVCMEIsQ0FDMUJELE1BQU84RCxFQUNQN0QsTUFBTzhELElBSUxrRCxFQUFtQixJQUFJOUgsRUFBYzhFLEdBQVcsRUFBRXJFLE9BQU1LLFlBQzFEOEUsRUFBSWdCLFVBQVUsQ0FBQ25HLE9BQU1LLFVBQ2hCNEYsTUFBT1IsSUFDSjVELFFBQVFDLElBQUkyRCxHQUNacUIsRUFBU00sWUFBWTNCLEVBQUl6RixLQUFNeUYsRUFBSXBGLE9BQ25DZ0gsRUFBaUIxSSxPQUFPLEdBQzFCLElBR1YwSSxFQUFpQmpJLG9CQUlqQitGLEVBQUllLFVBQ0NELE1BQU9SLElBQ0osTUFBTW9CLEVBQU8sSUFBSXhKLEVBQVEsQ0FDckJFLE1BQU9rSSxFQUNQakksU0FBWVMsSUFDUixNQUFNMkksRUFBZTVCLEVBQVcvRyxHQUNoQzRJLEVBQUs3SSxRQUFRNEksRUFBYSxHQUUvQixhQUNIQyxFQUFLMUksYUFBYSxJQUkxQjhGLEVBQVU5RSxpQkFBaUIsU0FBUyxLQUNoQ3VILEVBQWF6SCxPQUNid0YsRUFBYXhFLE1BQVEsR0FDckJ5RSxFQUFZekUsTUFBUSxHQUNwQmdGLEVBQWtCM0MsZ0JBQWdCa0MsRUFBUyxJQUkvQ1IsRUFBVzdFLGlCQUFpQixTQUFTLEtBQ2pDLE1BQU1tSSxFQUFlUixFQUFTSyxjQUM5QjdDLEVBQWNyRSxNQUFRcUgsRUFBYXRILEtBQ25DdUUsRUFBYXRFLE1BQVFxSCxFQUFhakgsTUFDbENnSCxFQUFpQnBJLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIHNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX3NlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkSXRlbSAoZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX3NlbGVjdG9yLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBwb3B1cDtcclxuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBTZWxlY3Rvci5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cFNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cCcpIHx8IChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWljb24nKSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXAsIGhhbmRsZVN1Ym1pdEZvcm0pIHtcclxuICAgICAgICBzdXBlcihwb3B1cCk7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlU3VibWl0Rm9ybSA9IGhhbmRsZVN1Ym1pdEZvcm07XHJcblxyXG4gICAgICAgIHRoaXMuX2Zvcm0gPSBwb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSBwb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy/RgdC+0LHQuNGA0LDQtdGCINC00LDQvdC90YvQtSDRgSDQv9C+0LvQtdC5XHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMgKCkge1xyXG4gICAgICAgIHRoaXMuX2lucHV0VmFsdWVMaXN0ID0ge307XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faW5wdXRWYWx1ZUxpc3RbaXRlbS5uYW1lXSA9IGl0ZW0udmFsdWU7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbnB1dFZhbHVlTGlzdDtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2xpc3QgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVTdWJtaXRGb3JtKHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMuX2xpc3QudGl0bGUsXHJcbiAgICAgICAgICAgICAgICBhYm91dDogdGhpcy5fbGlzdC5hYm91dH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yIChjb25maWcsIGZvcm1FbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy/RgdC60YDRi9GC0Ywg0L7RiNC40LHQutGDINCy0LLQvtC00LBcclxuICAgIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvL9C/0YDQvtCy0LXRgNC60LAg0YTQvtGA0LzRiyDQvdCwINCy0LDQu9C40LTQvdC+0YHRgtGMXHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7IC8v0LXRgdC70Lgg0LXRgdGC0Ywg0L7RiNC40LHQutCwXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy/Qv9GA0L7QstC10YDQutCwINC60LDQttC00L7Qs9C+INC/0L7Qu9GPINC90LAg0L7RiNC40LHQutGDINCyINC/0L7Qu9C1INCy0LLQvtC00LBcclxuICAgIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvL9GB0LTQtdC70LDRgtGMINC60L3QvtC/0LrRgyDQvdC10LDQutGC0LjQstC90L7QuSjQsNC60YLQuNCy0L3QvtC5KSDQv9GA0Lgg0L7RiNC40LHQutC1KNC/0YDQsNCy0LjQu9GM0L3QvtC8INCy0LLQvtC00LUpXHJcbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvL9GD0YHRgtCw0L3QvtCy0LjRgtGMINGB0LvRg9GI0LDRgtC10LvQuCDQvdCwINC60LDQttC00YPRjiDRhNC+0YDQvNGDXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMgKCkge1xyXG4gICAgICAgIC8v0L/RgNC+0LLQtdGA0LjRgtGMINC60L3QvtC/0LrRgyDQv9GA0Lgg0L7RgtC60YDRi9GC0LjQuCDRhNC+0YDQvNGLXHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgXHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCk9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAvL9C/0YDQvtCy0LXRgNGP0YLRjCDQutC90L7Qv9C60YMg0L/RgNC4INCy0LLQvtC00LUg0LrQsNC20LTQvtCz0L4g0YHQuNC80LLQvtC70LBcclxuICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgLy/Qt9Cw0LHQu9C+0LrQuNGA0L7QstCw0YLRjCDQutC90L7Qv9C60YMg0L/RgNC4INC+0YLQutGA0YvRgtC40Lgg0L/QvtC/0LDQv9CwXHJcbiAgICBibG9ja0J1dHRvblNhdmUocG9wdXApIHtcclxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcHVwX19zYXZlX2luYWN0aXZlJyk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICAgIFxyXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEsIHRlbXBsYXRlU2VsZWN0b3IsIHtvcGVuSW1hZ2V9KSB7XHJcbiAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fb3BlbkltYWdlID0gb3BlbkltYWdlO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRQaG90byA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3Bob3RvJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy/QstC+0LfQstGA0LDRidCw0LXRgiDRgdC10LvQtdC60YLQvtGAINGI0LDQsdC70L7QvdCwXHJcbiAgICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKVxyXG4gICAgICAgLmNvbnRlbnRcclxuICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpXHJcbiAgICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICAvL9GD0YHRgtCw0L3QvtCy0YnQuNC6INGB0L7QsdGL0YLQuNC5XHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UnKTtcclxuICAgICAgICBjb25zdCBidXR0b25UcmFzaCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RyYXNoJyk7XHJcbiAgICAgICAgY29uc3QgaWNvbkJ1dHRvbkxpa2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWljb24nKTtcclxuXHJcbiAgICAgICAgLy/Qu9Cw0LnQulxyXG4gICAgICAgIGJ1dHRvbkxpa2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGljb25CdXR0b25MaWtlLmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX2xpa2UtaWNvbl9hY3RpdmUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/Rg9C00LDQu9C40YLRjFxyXG4gICAgICAgIGJ1dHRvblRyYXNoLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/QvtGC0LrRgNGL0YLRjCDRhNC+0YLQvtCz0YDQsNGE0LjRjlxyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRQaG90by5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fb3BlbkltYWdlKHtsaW5rOiB0aGlzLl9kYXRhLmxpbmssIG5hbWU6IHRoaXMuX2RhdGEubmFtZX0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIC8v0YPRgdGC0LDQvdCw0LLQu9C40LLQsNC10YIg0LrQsNGA0YLQvtGH0LrQtSDQvdCw0LfQstCw0L3QuNC1LCDQutCw0YDRgtC40L3QutGDINC4INC+0L/QuNGB0LDQvdC40LVcclxuICAgIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgICAgICB0aGlzLl9lbGVtZW50UGhvdG8uc3JjID0gdGhpcy5fZGF0YS5saW5rO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRQaG90by5hbHQgPSB0aGlzLl9kYXRhLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fZGVzY3JpcHRpb24nKS50ZXh0Q29udGVudCA9IHRoaXMuX2RhdGEubmFtZTtcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICAgIH1cclxufSIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcblxyXG4vLyBleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4vLyAgICAge1xyXG4vLyAgICAgICBuYW1lOiAn0JzQsNC90LTQttC40YDQviDQodCw0L3QvicsXHJcbi8vICAgICAgIGRlc2NyaXB0aW9uOiAnaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC9hMi9kYi83My9hMmRiNzM4OTZlN2Q5Nzg1YmMzZWUzNzgxYzU0NGZhZS5qcGcnXHJcbi8vICAgICB9LFxyXG4vLyAgICAge1xyXG4vLyAgICAgICBuYW1lOiAn0KHQsNGC0L7RgNGDINCT0L7QtNC30ZEnLFxyXG4vLyAgICAgICBkZXNjcmlwdGlvbjogJ2h0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvYmQvOWUvMGMvYmQ5ZTBjNzhhNWFmMDU1N2Y2YmZkNTY5OGQwNzQ3YTIuanBnJ1xyXG4vLyAgICAgfSxcclxuLy8gICAgIHtcclxuLy8gICAgICAgbmFtZTogJ9Ck0YPRiNC4JyxcclxuLy8gICAgICAgZGVzY3JpcHRpb246ICdodHRwczovL2kucGluaW1nLmNvbS81NjR4L2E4LzYyL2E1L2E4NjJhNTVmMTExZDU4MGEyZGE2NTE1NGQ5NzYwMzk3LmpwZydcclxuLy8gICAgIH0sXHJcbi8vICAgICB7XHJcbi8vICAgICAgIG5hbWU6ICfQrdGA0LXQvSDQmdC10LPQtdGAJyxcclxuLy8gICAgICAgZGVzY3JpcHRpb246ICdodHRwczovL2kucGluaW1nLmNvbS81NjR4L2Y3LzY4LzZkL2Y3Njg2ZGZhMDRhZDQ4YWY5NTQ5N2M5MzAzYjI2NDcxLmpwZydcclxuLy8gICAgIH0sXHJcbi8vICAgICB7XHJcbi8vICAgICAgIG5hbWU6ICfQrtC00LfQuCDQmNGC0LDQtNC+0YDQuCcsXHJcbi8vICAgICAgIGRlc2NyaXB0aW9uOiAnaHR0cHM6Ly9pLnBpbmltZy5jb20vNTY0eC8wOS9hZC83My8wOWFkNzNjYzRlZTNiYjE5MDVmOTM3NGZmNzlmNTgyMy5qcGcnXHJcbi8vICAgICB9LFxyXG4vLyAgICAge1xyXG4vLyAgICAgICBuYW1lOiAn0JrRkdC00LfQuNGA0L4g0KDQtdC90LPQvtC60YMnLFxyXG4vLyAgICAgICBkZXNjcmlwdGlvbjogJ2h0dHBzOi8vaS5waW5pbWcuY29tLzU2NHgvMTEvNzUvZDEvMTE3NWQxYmI3MDExNDMwNmI3YjMxYWJlYWUxMWI2OWMuanBnJ1xyXG4vLyAgICAgfVxyXG4vLyAgIF07XHJcbiAgXHJcbmNvbnN0IHBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZScpO1xyXG4gIFxyXG5leHBvcnQgY29uc3QgZm9ybUVkaXRQcm9maWxlID0gcGFnZS5xdWVyeVNlbGVjdG9yKCcuZm9ybS1lZGl0Jyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtQWRkQ2FyZCA9IHBhZ2UucXVlcnlTZWxlY3RvcignLmZvcm0tYWRkJyk7XHJcbmV4cG9ydCBjb25zdCBpbWFnZUZ1bGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfaW1hZ2UtZnVsbCcpO1xyXG4gIFxyXG5leHBvcnQgY29uc3QgYnV0dG9uRWRpdCA9IHBhZ2UucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBidXR0b25BZGQgPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IHBhZ2UucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25hbWUnKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IHBhZ2UucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlUGhvdG8gPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19waG90bycpO1xyXG4gIFxyXG5leHBvcnQgY29uc3QgcG9wdXBFZGl0ID0gZm9ybUVkaXRQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cCcpO1xyXG5leHBvcnQgY29uc3QgbmFtZUlucHV0RWRpdCA9IGZvcm1FZGl0UHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfbmFtZScpO1xyXG5leHBvcnQgY29uc3Qgam9iSW5wdXRFZGl0ID0gZm9ybUVkaXRQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV9kZXNjcmlwdGlvbicpO1xyXG4gIFxyXG5leHBvcnQgY29uc3QgcG9wdXBBZGQgPSBmb3JtQWRkQ2FyZC5xdWVyeVNlbGVjdG9yKCcucG9wdXAnKTtcclxuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dEFkZCA9IGZvcm1BZGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZV90aXRsZScpO1xyXG5leHBvcnQgY29uc3Qgc3JjSW5wdXRBZGQgPSBmb3JtQWRkQ2FyZC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfbGluaycpO1xyXG4gIFxyXG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZSA9IGltYWdlRnVsbC5xdWVyeVNlbGVjdG9yKCcucG9wdXAnKTtcclxuICBcclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgZmllbGRzZXRTZWxlY3RvcjogJy5wb3B1cF9fZm9ybS1zZXQnLFxyXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc2F2ZScsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19zYXZlX2luYWN0aXZlJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlT2JqZWN0ID0gbmV3IFBvcHVwV2l0aEltYWdlKGltYWdlRnVsbCk7XHJcbnBvcHVwSW1hZ2VPYmplY3Quc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8v0L7RgtC60YDRi9GC0Ywg0LrQsNGA0YLQuNC90LrRg1xyXG5leHBvcnQgZnVuY3Rpb24gb3BlbkltYWdlICh7bGluaywgbmFtZX0pIHtcclxuICBwb3B1cEltYWdlT2JqZWN0Lm9wZW4obmFtZSwgbGluayk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYXJkKGVsZW1lbnQpIHtcclxuICBjb25zdCBlbGVtZW50Q2FyZCA9IG5ldyBDYXJkKGVsZW1lbnQsICcjZWxlbWVudCcsIHtvcGVuSW1hZ2V9KTtcclxuICBjb25zdCBjYXJkVGVtcGxhdGUgPSBlbGVtZW50Q2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuXHJcbiAgcmV0dXJuIGNhcmRUZW1wbGF0ZTtcclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXApIHtcclxuICAgICAgICBzdXBlcihwb3B1cCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcbiAgICAgICAgdGhpcy5fZmlnY2FwdGlvbiA9IHRoaXMuX3BvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnBvcHVwX19maWdjYXB0aW9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICAgICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcclxuICAgICAgICB0aGlzLl9pbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX2ZpZ2NhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIH1cclxufSIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5cclxuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xyXG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcclxuXHJcbmltcG9ydCB7IHZhbGlkYXRpb25Db25maWcsIGZvcm1BZGRDYXJkLCBmb3JtRWRpdFByb2ZpbGUsIHBvcHVwQWRkLCBwb3B1cEVkaXQsIGJ1dHRvbkFkZCwgYnV0dG9uRWRpdCwgbmFtZUlucHV0QWRkLCBuYW1lSW5wdXRFZGl0LCBzcmNJbnB1dEFkZCwgam9iSW5wdXRFZGl0LFxyXG5wcm9maWxlTmFtZSwgcHJvZmlsZURlc2NyaXB0aW9uLCBwcm9maWxlUGhvdG99IGZyb20gJy4uL3V0aWxzL3V0aWxzLmpzJztcclxuaW1wb3J0IHsgb3BlbkltYWdlLCBjcmVhdGVDYXJkIH0gZnJvbSAnLi4vdXRpbHMvdXRpbHMuanMnO1xyXG5cclxuLy8g0JLQsNC70LjQtNCw0YbQuNGPXHJcbmNvbnN0IGZvcm1BZGRWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUFkZENhcmQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJykpO1xyXG5jb25zdCBmb3JtRWRpdFZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBmb3JtRWRpdFByb2ZpbGUucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJykpO1xyXG5mb3JtQWRkVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmZvcm1FZGl0VmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICAgIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTYwJyxcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiAnMTFjMjYyZDktNDE3Mi00NThjLTkyNGUtZDMwMDlkYTUyNmQ0JyxcclxuICAgICAgICAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICB9XHJcbn0pO1xyXG5cclxuLy/Qv9GA0Lgg0LfQsNCz0YDRg9C30LrQtSDRgdGC0YDQsNC90LjRhtGLINC40LzRjyDQuCDQvtC/0LjRgdCw0L3QuNC1INGBINGB0LXRgNCy0LXRgNCwXHJcbmFwaS5nZXRJbmZvKClcclxuICAgIC50aGVuICgocmVzKSA9PiB7XHJcbiAgICAgICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSByZXMubmFtZTtcclxuICAgICAgICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSByZXMuYWJvdXQ7XHJcbiAgICAgICAgcHJvZmlsZVBob3RvLnNyYyA9IHJlcy5hdmF0YXI7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgIH0pO1xyXG5cclxuLy/Qv9C+0YLQvtC8XHJcbmNvbnN0IHBvcHVwQWRkQ2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwQWRkLCAoe25hbWUsIGRlc2NyaXB0aW9ufSkgPT4ge1xyXG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gY3JlYXRlQ2FyZCh7bmFtZSwgZGVzY3JpcHRpb259KTtcclxuICAgIGNhcmQuYWRkSXRlbShjYXJkVGVtcGxhdGUpO1xyXG5cclxuICAgIHBvcHVwQWRkQ2FyZC5jbG9zZSgpO1xyXG59KTtcclxucG9wdXBBZGRDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBpbmZvVXNlciA9IG5ldyBVc2VySW5mbyh7XHJcbiAgICB0aXRsZTogcHJvZmlsZU5hbWUsXHJcbiAgICBhYm91dDogcHJvZmlsZURlc2NyaXB0aW9uXHJcbn0pO1xyXG5cclxuXHJcbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEVkaXQsICh7bmFtZSwgYWJvdXR9KSA9PiB7XHJcbiAgICBhcGkucGF0Y2hJbmZvKHtuYW1lLCBhYm91dH0pXHJcbiAgICAgICAgLnRoZW4gKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICAgICAgaW5mb1VzZXIuc2V0VXNlckluZm8ocmVzLm5hbWUsIHJlcy5hYm91dCk7XHJcbiAgICAgICAgICAgIHBvcHVwRWRpdFByb2ZpbGUuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxufSk7XHJcblxyXG5wb3B1cEVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5cclxuLy/QntGC0YDQuNGB0L7QstC60LAg0LTQtdGE0L7Qu9GC0L3Ri9GFINC60LDRgNGC0L7Rh9C10LpcclxuYXBpLmdldENhcmQoKVxyXG4gICAgLnRoZW4gKChyZXMpID0+IHtcclxuICAgICAgICBjb25zdCBjYXJkID0gbmV3IFNlY3Rpb24oe1xyXG4gICAgICAgICAgICBpdGVtczogcmVzLFxyXG4gICAgICAgICAgICByZW5kZXJlcjogIChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBjcmVhdGVDYXJkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgY2FyZC5hZGRJdGVtKGNhcmRUZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCAnLmVsZW1lbnRzJyk7XHJcbiAgICAgICAgY2FyZC5yZW5kZXJJdGVtcygpO1xyXG4gICAgfSk7XHJcblxyXG4vL9GB0LvRg9GI0LDRgtC10LvRjCDQutC90L7Qv9C60Lgg0LTQvtCx0LDQstC40YLRjFxyXG5idXR0b25BZGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBwb3B1cEFkZENhcmQub3BlbigpO1xyXG4gICAgbmFtZUlucHV0QWRkLnZhbHVlID0gJyc7XHJcbiAgICBzcmNJbnB1dEFkZC52YWx1ZSA9ICcnO1xyXG4gICAgZm9ybUFkZFZhbGlkYXRpb24uYmxvY2tCdXR0b25TYXZlKHBvcHVwQWRkKTtcclxufSk7XHJcblxyXG4vL9GB0LvRg9GI0LDRgtC10LvRjCDQutC90L7Qv9C60Lgg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRj1xyXG5idXR0b25FZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgY29uc3QgaW5mb0Zyb21QYWdlID0gaW5mb1VzZXIuZ2V0VXNlckluZm8oKTtcclxuICAgIG5hbWVJbnB1dEVkaXQudmFsdWUgPSBpbmZvRnJvbVBhZ2UubmFtZTtcclxuICAgIGpvYklucHV0RWRpdC52YWx1ZSA9IGluZm9Gcm9tUGFnZS5hYm91dDtcclxuICAgIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xyXG59KTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5fdXJsID0gY29uZmlnLmJhc2VVcmw7XHJcbiAgICAgICAgdGhpcy5faGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVSZXNwb25zZShyZXMpIHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ9Cf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAnKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW5mbygpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuICh0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2FyZCgpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuICh0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcGF0Y2hJbmZvKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBhYm91dDogZGF0YS5hYm91dFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuICh0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgICB9XHJcbn0iLCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHt0aXRsZSwgYWJvdXR9KSB7XHJcbiAgICAgICAgdGhpcy5fdGl0bGUgPSB0aXRsZTtcclxuICAgICAgICB0aGlzLl9hYm91dCA9IGFib3V0O1xyXG5cclxuICAgICAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy/RgdC+0LHQuNGA0LDQtdGCINC00LDQvdC90YvQtSDRgdC+INGB0YLRgNCw0L3QuNGG0YtcclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIGNvbnN0IGZvcm1UaXRsZSA9IHRoaXMuX3RpdGxlLnRleHRDb250ZW50O1xyXG4gICAgICAgIGNvbnN0IGZvcm1EZXNjcmlwdGlvbiA9IHRoaXMuX2Fib3V0LnRleHRDb250ZW50O1xyXG4gICAgICAgIHJldHVybiB7bmFtZTogZm9ybVRpdGxlLCBhYm91dDogZm9ybURlc2NyaXB0aW9ufTtcclxuICAgIH1cclxuXHJcbiAgICAvL9GD0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdGCINC90L7QstC+0LUg0LjQvNGPINC4INC+0L/QuNGB0LDQvdC40LVcclxuICAgIHNldFVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGFib3V0O1xyXG4gICAgfVxyXG59Il0sIm5hbWVzIjpbIlNlY3Rpb24iLCJjb25zdHJ1Y3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJzZWxlY3RvciIsInRoaXMiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfc2VsZWN0b3IiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJyZW5kZXJJdGVtcyIsImZvckVhY2giLCJpdGVtIiwiUG9wdXAiLCJwb3B1cCIsIl9wb3B1cFNlbGVjdG9yIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsImNsb3NlIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsIm9wZW4iLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXRGb3JtIiwic3VwZXIiLCJfaGFuZGxlU3VibWl0Rm9ybSIsIl9mb3JtIiwiX2lucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfaW5wdXRWYWx1ZUxpc3QiLCJuYW1lIiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9saXN0IiwidGl0bGUiLCJhYm91dCIsInJlc2V0IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2Zvcm1FbGVtZW50IiwiX2NvbmZpZyIsIkFycmF5IiwiZnJvbSIsImlucHV0U2VsZWN0b3IiLCJfYnV0dG9uRWxlbWVudCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJpbnB1dEVycm9yQ2xhc3MiLCJ0ZXh0Q29udGVudCIsImVycm9yQ2xhc3MiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsImNvbnNvbGUiLCJsb2ciLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJzb21lIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImRpc2FibGVkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYmxvY2tCdXR0b25TYXZlIiwiZW5hYmxlVmFsaWRhdGlvbiIsIkNhcmQiLCJkYXRhIiwidGVtcGxhdGVTZWxlY3RvciIsIm9wZW5JbWFnZSIsIl9kYXRhIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfb3BlbkltYWdlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfZWxlbWVudFBob3RvIiwiY29udGVudCIsImNsb25lTm9kZSIsImJ1dHRvbkxpa2UiLCJidXR0b25UcmFzaCIsImljb25CdXR0b25MaWtlIiwidG9nZ2xlIiwibGluayIsImdlbmVyYXRlQ2FyZCIsInNyYyIsImFsdCIsInBhZ2UiLCJmb3JtRWRpdFByb2ZpbGUiLCJmb3JtQWRkQ2FyZCIsImltYWdlRnVsbCIsImJ1dHRvbkVkaXQiLCJidXR0b25BZGQiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVQaG90byIsInBvcHVwRWRpdCIsIm5hbWVJbnB1dEVkaXQiLCJqb2JJbnB1dEVkaXQiLCJwb3B1cEFkZCIsIm5hbWVJbnB1dEFkZCIsInNyY0lucHV0QWRkIiwidmFsaWRhdGlvbkNvbmZpZyIsImZpZWxkc2V0U2VsZWN0b3IiLCJwb3B1cEltYWdlT2JqZWN0IiwiX2ltYWdlIiwiX2ZpZ2NhcHRpb24iLCJjcmVhdGVDYXJkIiwiZm9ybUFkZFZhbGlkYXRpb24iLCJmb3JtRWRpdFZhbGlkYXRpb24iLCJhcGkiLCJfdXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsIl9oYW5kbGVSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJFcnJvciIsImdldEluZm8iLCJmZXRjaCIsInRoZW4iLCJnZXRDYXJkIiwicGF0Y2hJbmZvIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhdXRob3JpemF0aW9uIiwiYXZhdGFyIiwicG9wdXBBZGRDYXJkIiwiZGVzY3JpcHRpb24iLCJjYXJkVGVtcGxhdGUiLCJjYXJkIiwiaW5mb1VzZXIiLCJfdGl0bGUiLCJfYWJvdXQiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZURlc2NyaXB0aW9uIiwiZ2V0VXNlckluZm8iLCJzZXRVc2VySW5mbyIsInBvcHVwRWRpdFByb2ZpbGUiLCJpbmZvRnJvbVBhZ2UiXSwic291cmNlUm9vdCI6IiJ9